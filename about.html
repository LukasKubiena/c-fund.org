<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>about — c</title>
    <link rel="preload" href="NeueHaasDisplay-Light.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="NeueHaasDisplay-Mediu.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="NeueHaasDisplay-Thin.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="icon" href="img/logo.png" type="image/png">
    <style>
        @font-face { font-family: 'NeueHaasDisplay-Light'; src: url('NeueHaasDisplay-Light.woff2') format('woff2'); font-display: swap; }
        @font-face { font-family: 'NeueHaasDisplay-Medium'; src: url('NeueHaasDisplay-Mediu.woff2') format('woff2'); font-display: swap; }
        @font-face { font-family: 'NeueHaasDisplay-Thin'; src: url('NeueHaasDisplay-Thin.woff2') format('woff2'); font-display: swap; }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        body { background: #000; color: #fff; font-family: 'NeueHaasDisplay-Light', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }

        .header { position: absolute; top: 40px; left: 50%; transform: translateX(-50%); width: 100%; max-width: 1440px; padding: 0 40px; z-index: 100; opacity: 0; transition: opacity 0.8s ease; }
        .header.visible { opacity: 1; }
        .nav-content { display: flex; justify-content: space-between; align-items: flex-start; height: 64px; }
        .logo { font-size: 24px; color: #fff; text-decoration: none; font-family: 'NeueHaasDisplay-Medium', sans-serif; letter-spacing: -0.01em; }
        .nav-links { display: flex; gap: 32px; }
        .nav-link { color: #fff; text-decoration: none; font-size: 16px; letter-spacing: -0.01em; transition: opacity 0.3s ease; }
        .nav-link:hover { opacity: 0.7; }

        .background-container { position: absolute; inset: 0; z-index: 0; opacity: 0; transition: opacity 1.2s ease; background: linear-gradient(180deg, #0b0b0b 0%, #000 100%); }
        .background-container.visible { opacity: 1; }
        .background-image { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%) contrast(1.02); opacity: 0; transition: opacity 1s ease; mix-blend-mode: luminosity; will-change: opacity, transform; }
        .background-image.active { opacity: 0.6; }
        .background-image.active.zoom-out { animation: subtleZoomOut 20s ease-out forwards; }
        .background-image.active.zoom-in { animation: subtleZoomIn 20s ease-in forwards; }
        @keyframes subtleZoomOut { 0% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes subtleZoomIn { 0% { transform: scale(1); } 100% { transform: scale(1.05); } }

        .center-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2; font-family: 'NeueHaasDisplay-Medium', sans-serif; font-size: 28px; letter-spacing: -0.01em; text-align: center; }

        @media screen and (max-width: 968px) {
            html, body { height: auto; overflow: auto; }
            .header { position: fixed; top: 0; left: 50%; transform: translateX(-50%); padding: env(safe-area-inset-top) 24px 0 24px; width: 100%; max-width: 1440px; }
            .nav-content { height: 56px; align-items: center; }
            .center-message { position: fixed; font-size: 24px; padding: 0 24px; }
        }
    </style>
</head>
<body>
    <div class="background-container"></div>

    <header class="header">
        <div class="nav-content">
            <a href="index.html" class="logo">c</a>
            <nav class="nav-links">
                <a href="verein.html" class="nav-link">verein</a>
                <a href="production.html" class="nav-link">production</a>
                <a href="praesenzkultur.html" class="nav-link">präsenzkultur</a>
                <a href="about.html" class="nav-link">about</a>
            </nav>
        </div>
    </header>

    <div class="center-message">more to see soon</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const backgroundContainer = document.querySelector('.background-container');
            let backgrounds = [];
            let currentBg = 0;
            const header = document.querySelector('.header');

            const baseNames = Array.from({ length: 12 }, (_, i) => `img${i + 1}`);
            const exts = ['.jpg', '.jpeg', '.png', '.webp', '.avif', '.JPG'];
            const candidates = [];
            baseNames.forEach(name => { exts.forEach(ext => { candidates.push(`img/${name}${ext}`); }); });

            function probe(src) {
                return new Promise(resolve => {
                    const test = new Image();
                    test.onload = () => resolve(src);
                    test.onerror = () => resolve(null);
                    test.src = src;
                });
            }

            // Show container immediately and try to insert a first image fast
            (function addImmediateFallback() {
                requestAnimationFrame(() => backgroundContainer.classList.add('visible'));
                const fallbacks = ['img/img2.jpg', 'img/img1.png'];
                let inserted = false;
                function trySrc(i) {
                    if (inserted || i >= fallbacks.length) return;
                    const test = new Image();
                    test.onload = () => {
                        if (inserted) return;
                        const img = document.createElement('img');
                        img.src = fallbacks[i];
                        img.alt = '';
                        img.className = 'background-image active zoom-out';
                        backgroundContainer.appendChild(img);
                        inserted = true;
                    };
                    test.onerror = () => trySrc(i + 1);
                    test.src = fallbacks[i];
                }
                trySrc(0);
            })();

            (async function buildAndInject() {
                const results = await Promise.all(candidates.map(probe));
                const existing = Array.from(new Set(results.filter(Boolean)));
                const preloadedList = existing.sort(() => Math.random() - 0.5);
                preloadedList.forEach(src => {
                    const img = document.createElement('img');
                    img.src = src;
                    img.alt = '';
                    img.className = 'background-image';
                    backgroundContainer.appendChild(img);
                });
                backgrounds = Array.from(document.querySelectorAll('.background-image'));
                if (backgrounds[0] && !backgrounds[0].classList.contains('active')) backgrounds[0].classList.add('active', 'zoom-out');
                setTimeout(() => header.classList.add('visible'), 300);
            })();

            function ensureDecoded(img) {
                if (!img) return Promise.resolve();
                if (img.decode) { return img.decode().catch(() => {}); }
                if (img.complete && img.naturalWidth > 0) { return Promise.resolve(); }
                return new Promise(resolve => img.addEventListener('load', resolve, { once: true }));
            }

            let zoomOutNext = false;
            async function changeBackground() {
                if (!backgrounds.length) return;
                const current = backgrounds[currentBg];
                const nextIndex = (currentBg + 1) % backgrounds.length;
                const next = backgrounds[nextIndex];

                await ensureDecoded(next);
                current.classList.remove('zoom-in', 'zoom-out');
                next.classList.remove('zoom-in', 'zoom-out');
                void next.offsetWidth;
                next.classList.add('active', zoomOutNext ? 'zoom-out' : 'zoom-in');
                requestAnimationFrame(() => { current.classList.remove('active'); });
                currentBg = nextIndex;
                zoomOutNext = !zoomOutNext;
            }
            setInterval(changeBackground, 20000);
        });
    </script>
</body>
</html>